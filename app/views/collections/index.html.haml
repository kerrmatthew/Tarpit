%h1 Listing collections

-if @collections.count > 0 
  %table  
    -@collections.each do |collection| 
      %tr
        %td 
          .collection-name=collection.name
          %ul
            -collection.fossils.each do |fossil| 
              %li.collection-items= render "fossils/list_item", :fossil => fossil 
              
            =link_to 'New File', { :controller => 'fossils', :action => 'new', :collection_id => collection.id } if can? :create, Fossil
              
        %td.collection-edit= link_to 'Edit', edit_collection_path(collection) if can? :edit, collection
        %td.collection-edit= link_to 'Destroy', collection, :confirm => 'Are you sure?', :method => :delete if can? :destroy, collection 

-else
  %h2 No Collections are visible. 
  -unless user_signed_in? 
    Try logging in: 
    =form_for("user", :url => user_session_path) do |f| 
      %p 
        =f.label :login 
        %br 
        =f.text_field :login 
  
      %p 
        =f.label :password 
        %br
        =f.password_field :password 
    
      %p= f.submit "Sign in"

%br
-if can? :create, Collection
  =link_to 'New Collection', new_collection_path 
